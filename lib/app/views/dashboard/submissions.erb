<% content_for :dashboard_content do %>
  <div class="container">
    <h2>Exercises</h2>
    <h4>Current</h4>
    <% if profile.has_current_submissions? %>
      <table class="table table-bordered table-striped">
        <thead>
          <tr>
            <th>Exercise</th>
            <th>Language</th>
            <th>Iterations</th>
            <th>Nits</th>
          </tr>
        </thead>
        <tbody>
        <% profile.current.each do |submission| %>
          <tr>
            <td><%= profile.submission_link(submission) %></td>
            <td><%= Language.of(submission.track_id) %></td>
            <td><%= submission.version %></td>
            <td><%= submission.nit_count %></td>
          </tr>
        <% end %>
        </tbody>
      </table>
    <% else %>
      <p><%= profile.no_current_sumbissions_message %></p>
    <% end %>

    <% if profile.has_hibernating_submissions? %>
      <h4>Hibernating</h4>
      <p>To make a hibernating exercise active again, either comment on it, or submit a new iteration.</p>
      <table class="table table-bordered table-striped">
        <thead>
          <tr>
            <th>Exercise</th>
            <th>Language</th>
            <th>Iterations</th>
            <th>Nits</th>
          </tr>
        </thead>
        <tbody>
        <% profile.hibernating_submissions.each do |submission| %>
          <tr>
            <td><%= profile.submission_link(submission) %></td>
            <td><%= Language.of(submission.track_id) %></td>
            <td><%= submission.version %></td>
            <td><%= submission.nit_count %></td>
          </tr>
        <% end %>
        </tbody>
      </table>
    <% end %>

    <% if profile.has_completed_submissions? %>
      <h4>Completed</h4>
      <table class="table table-bordered table-striped">
        <col />
        <col width="100%" />
        <thead>
          <tr>
            <th>Language</th>
            <th>Exercises</th>
          </tr>
        </thead>
        <tbody>
          <% profile.track_ids.each do |track_id| %>
            <tr>
              <td><%= Language.of(track_id) %></td>
              <td>
                <% profile.completed_in(track_id).each do |submission| %>
                  <span class="completed-exercise">
                    <%= profile.submission_link(submission) %>
                  </span>
                <% end %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    <% else %>
      <p><%= profile.no_completed_sumbissions_message %></p>
    <% end %>
  </div>
<% end %>

<%= erb :"dashboard/dashboard", locals: { current_page: :submissions, current_page_title: "Submissions" } %>